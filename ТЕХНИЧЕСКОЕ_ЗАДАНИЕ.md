# –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï
## –î–æ–¥–µ–ª–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ "–ö–∞—Ä—Ç–∞ –ê–ø—Ä–∞—à–∫–∏"

**–í–µ—Ä—Å–∏—è:** 2.0.0  
**–î–∞—Ç–∞:** –§–µ–≤—Ä–∞–ª—å 2026  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  

---

## üìã –û–ì–õ–ê–í–õ–ï–ù–ò–ï
1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á](#–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π-—Å–ø–∏—Å–æ–∫-–∑–∞–¥–∞—á)
3. [–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ –º–æ–¥—É–ª—è–º](#–ø–æ–¥—Ä–æ–±–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–ø–æ-–º–æ–¥—É–ª—è–º)
4. [–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∞](#–∫—Ä–∏—Ç–µ—Ä–∏–∏-–ø—Ä–∏—ë–º–∞)
5. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
6. [–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏](#–≥—Ä–∞—Ñ–∏–∫-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

---

## üìå –í–≤–µ–¥–µ–Ω–∏–µ

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è SVG –∫–∞—Ä—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∫–∞ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞
- ‚úÖ PWA / offline —Ä–µ–∂–∏–º
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–≤–∏–ª—å–æ–Ω–∞–º–∏ –∏ —Å–∫–∏–¥–∫–∞–º–∏

### –¶–µ–ª—å –¥–æ–¥–µ–ª–∫–∏
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞:
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (2FA, SMS)
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –Æ–∑–∞–±–∏–ª–∏—Ç–∏ (–∏–∑–±—Ä–∞–Ω–Ω–æ–µ, –ø–æ–¥–µ–ª–∏—Ç—å—Å—è)
- –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (—Ç–µ—Å—Ç—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, CI/CD)

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á

### üî¥ –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (High) ‚Äî 1-3 –Ω–µ–¥–µ–ª–∏
–ö—Ä–∏—Ç–∏—á–Ω–æ–µ –¥–ª—è MVP, –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å

| ID | –ú–æ–¥—É–ª—å | –ó–∞–¥–∞—á–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –î–Ω–∏ |
|----|--------|--------|-----------|-----|
| H1 | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | –†–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ SMS-–∫–æ–¥–æ–≤ | `HIGH` | 2-3 |
| H2 | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA) | `HIGH` | 3-4 |
| H3 | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ | –ë–∞–∑–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤ | `HIGH` | 3-4 |
| H4 | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ | –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞ | `HIGH` | 4-5 |
| H5 | –§—É–Ω–∫—Ü–∏–∏ | –§—É–Ω–∫—Ü–∏—è "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" –¥–ª—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π | `MEDIUM` | 2-3 |
| H6 | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (Audit Log) | `MEDIUM` | 2-3 |

### üü° –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (Medium) ‚Äî 3-5 –Ω–µ–¥–µ–ª—å
–í–∞–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–ª—è MVP

| ID | –ú–æ–¥—É–ª—å | –ó–∞–¥–∞—á–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –î–Ω–∏ |
|----|--------|--------|-----------|-----|
| M1 | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–Ø–Ω–¥–µ–∫—Å, –í–ö, Telegram) | `HIGH` | 4-5 |
| M2 | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞–º–∏ / 2GIS | `HIGH` | 4-5 |
| M3 | –§—É–Ω–∫—Ü–∏–∏ | QR-–∫–æ–¥—ã –¥–ª—è —Å–∫–∏–¥–æ–∫ | `MEDIUM` | 2-3 |
| M4 | –§—É–Ω–∫—Ü–∏–∏ | –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ —Å–æ—Ü.—Å–µ—Ç—è—Ö (—Ä–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è) | `MEDIUM` | 2-3 |
| M5 | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | `MEDIUM` | 2-3 |
| M6 | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | `MEDIUM` | 2-3 |
| M7 | –≠–∫—Å–ø–æ—Ä—Ç | –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ (PDF, Excel) | `MEDIUM` | 3 |
| M8 | –ê–¥–º–∏–Ω–∫–∞ | –ì—Ä–∞—Ñ–∏–∫–∏ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ | `MEDIUM` | 3-4 |

### üü¢ –ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢ (Low) ‚Äî 5+ –Ω–µ–¥–µ–ª—å
Nice-to-have —Ñ—É–Ω–∫—Ü–∏–∏

| ID | –ú–æ–¥—É–ª—å | –ó–∞–¥–∞—á–∞ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –î–Ω–∏ |
|----|--------|--------|-----------|-----|
| L1 | –§—É–Ω–∫—Ü–∏–∏ | –ì–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–∏—Å–∫ | `MEDIUM` | 2-3 |
| L2 | –§—É–Ω–∫—Ü–∏–∏ | AR –Ω–∞–≤–∏–≥–∞—Ü–∏—è | `VERY_HIGH` | 5-7 |
| L3 | –§—É–Ω–∫—Ü–∏–∏ | –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ | `MEDIUM` | 3-4 |
| L4 | –§—É–Ω–∫—Ü–∏–∏ | –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ | `LOW` | 1-2 |
| L5 | –§—É–Ω–∫—Ü–∏–∏ | –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å (i18n) | `LOW` | 2-3 |
| L6 | –ö–∞—á–µ—Å—Ç–≤–æ | Accessibility (WCAG 2.1) | `MEDIUM` | 3-4 |
| L7 | –ö–∞—á–µ—Å—Ç–≤–æ | –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã (Unit, Integration, E2E) | `HIGH` | 4-5 |
| L8 | DevOps | CI/CD pipeline | `MEDIUM` | 3 |
| L9 | DevOps | Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è | `MEDIUM` | 2-3 |

---

## üì¶ –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ –º–æ–¥—É–ª—è–º

### –ú–û–î–£–õ–¨ 1: –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –ò –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

#### –ó–∞–¥–∞—á–∞ H1: –†–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ SMS-–∫–æ–¥–æ–≤

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ó–∞–º–µ–Ω–∏ –∑–∞–≥–ª—É—à–∫—É –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É SMS-–∫–æ–¥–æ–≤ –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ HIGH  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** HIGH  

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (auth.js) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–≥–ª—É—à–∫—É –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ SMS. –ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
```
- –í—ã–±—Ä–∞—Ç—å SMS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Twilio, AWS SNS, –∏–ª–∏ Yandex SMS API)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–ª—é—á–µ–π API
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é sendSMSCode(phone, code)
- –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 4-6 —Ü–∏—Ñ—Ä
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∫–æ–¥–∞: 5-10 –º–∏–Ω—É—Ç
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–∏/–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
```

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `/js/auth.js` - —Ñ—É–Ω–∫—Ü–∏—è `handleLoginFormSubmit()`
- `/js/config.public.js` - –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª `/js/sms.service.js`

**Acceptance Criteria:**
- ‚úÖ –°–ú–° –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ –≤–≤–µ–¥—ë–Ω–Ω—ã–π –Ω–æ–º–µ—Ä
- ‚úÖ –ö–æ–¥ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–∫–∏ –∫–æ–¥–æ–≤ –≤ –ª–æ–≥–∞—Ö
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–Ω–µ–≤–µ—Ä–Ω—ã–µ –Ω–æ–º–µ—Ä–∞, —Å–±–æ–∏ API)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –∞—É–¥–∏—Ç–∞

**–°—Å—ã–ª–∫–∏:**
- RFC –¥–ª—è SMS: https://tools.ietf.org/html/rfc3629

---

#### –ó–∞–¥–∞—á–∞ H2: –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å 2FA –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤ –∏ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ HIGH  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** HIGH  

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (2FA) –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ (is_owner=true) –∏ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö.

**–í–∞—Ä–∏–∞–Ω—Ç—ã 2FA:**
1. **SMS-–∫–æ–¥** (–±–∞–∑–æ–≤—ã–π) - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤—Ç–æ—Ä–æ–≥–æ –∫–æ–¥–∞ –ø–æ SMS
2. **TOTP –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (—Å—Ä–µ–¥–Ω–∏–π) - Google Authenticator, Authy
3. **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–¥—ã** (–±–∞–∑–æ–≤—ã–π) - –∫–æ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
```
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É speakeasy –¥–ª—è TOTP
- –•—Ä–∞–Ω–∏—Ç—å secrets –≤ tenants.totp_secret ENCRYPTED
- –ù–µ–Ω—É–ª–µ–≤–∞—è uuid –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–∞–Ω—Å–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ 2FA –≤ localStorage
- UI –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è 2FA
- –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ 2FA –ø–æ—Å–ª–µ –ø–∞—Ä–æ–ª—è
- –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–¥—ã (10 —à—Ç—É–∫) –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ 2FA
```

**–°—Ö–µ–º–∞ –ë–î –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```sql
ALTER TABLE tenants ADD COLUMN totp_secret TEXT DEFAULT NULL;
ALTER TABLE tenants ADD COLUMN totp_enabled BOOLEAN DEFAULT FALSE;
ALTER TABLE tenants ADD COLUMN backup_codes TEXT[] DEFAULT NULL;
ALTER TABLE tenants ADD COLUMN last_2fa_check TIMESTAMP DEFAULT NULL;

CREATE TABLE sessions (
  id UUID PRIMARY KEY,
  tenant_id UUID REFERENCES tenants(id),
  token TEXT UNIQUE NOT NULL,
  ip_address TEXT,
  user_agent TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  expires_at TIMESTAMP,
  is_2fa_verified BOOLEAN DEFAULT FALSE
);
```

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `/js/auth.js` - –ª–æ–≥–∏–∫–∞ 2FA
- `/admin.html` - UI –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è 2FA
- `/superadmin.html` - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è 2FA
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `/js/totp.service.js`
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `/@2fa-setup.html`

**Acceptance Criteria:**
- ‚úÖ TOTP –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ QR-–∫–æ–¥ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ 2FA –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è is_owner
- ‚úÖ –°–µ–∞–Ω—Å —Ç—Ä–µ–±—É–µ—Ç 2FA –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤

---

### –ú–û–î–£–õ–¨ 2: –ê–ù–ê–õ–ò–¢–ò–ö–ê –ò –û–¢–ß–Å–¢–´

#### –ó–∞–¥–∞—á–∞ H3: –ë–∞–∑–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ HIGH  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** MEDIUM  

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä—ã –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤ –∏ —Å–∫–∏–¥–æ–∫. –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤, –∫–ª–∏–∫–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∫–∏–¥–æ–∫.

**–ü–æ–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏:**
```
- –ü—Ä–æ—Å–º–æ—Ç—Ä—ã –ø–∞–≤–∏–ª—å–æ–Ω–∞ (–∑–∞ –¥–µ–Ω—å, –Ω–µ–¥–µ–ª—é, –º–µ—Å—è—Ü)
- –ö–ª–∏–∫–∏ –Ω–∞ —Å–≤—è–∑—å (—Ç–µ–ª–µ—Ñ–æ–Ω, —Å–æ—Ü.—Å–µ—Ç–∏)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫–∏–¥–æ–∫ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- –ü–µ—Ä–µ—Ö–æ–¥—ã –Ω–∞ —Å–æ—Ü.—Å–µ—Ç–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
```

**–°—Ö–µ–º–∞ –ë–î:**
```sql
CREATE TABLE pavilion_analytics (
  id UUID PRIMARY KEY,
  pavilion_id UUID REFERENCES pavilions(id),
  date DATE,
  views INT DEFAULT 0,
  clicks INT DEFAULT 0,
  discounts_used INT DEFAULT 0,
  shares INT DEFAULT 0,
  favorites INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(pavilion_id, date)
);

CREATE TABLE user_sessions (
  id UUID PRIMARY KEY,
  pavilion_id UUID REFERENCES pavilions(id),
  duration_seconds INT,
  created_at TIMESTAMP DEFAULT NOW()
);
```

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:**
```html
<!-- admin.html —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–æ–π -->
<div id="analytics-tab">
  <div class="stats-cards">
    <div class="stat-card">
      <h3>–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</h3>
      <div class="stat-chart" id="views-chart"></div>
    </div>
    <div class="stat-card">
      <h3>–ö–ª–∏–∫–∏</h3>
      <span id="clicks-count">0</span>
    </div>
    <div class="stat-card">
      <h3>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Å–∫–∏–¥–æ–∫</h3>
      <span id="discounts-count">0</span>
    </div>
  </div>
  <div class="date-range-selector">
    <button>–°–µ–≥–æ–¥–Ω—è</button>
    <button>–ù–µ–¥–µ–ª—è</button>
    <button>–ú–µ—Å—è—Ü</button>
    <button>–ì–æ–¥</button>
  </div>
</div>
```

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `/js/analytics.service.js` - —Ä–∞–±–æ—Ç–∞ —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π
- `/js/charts.lib.js` - –ø–æ–¥–∫–ª—é—á–∏—Ç—å Chart.js –∏–ª–∏ D3.js
- –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ –≤ `/admin.html`

**Acceptance Criteria:**
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–¥—Å—á–∏—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

#### –ó–∞–¥–∞—á–∞ H4: –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –≤ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∫–µ  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ HIGH  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** HIGH  

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É —Å–∏—Å—Ç–µ–º—ã —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ø–µ—Ä–∏–æ–¥—ã, —Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ø –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤ –∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –∞–Ω–æ–º–∞–ª–∏–∏.

**–¢—Ä–µ–±—É–µ–º—ã–µ –æ—Ç—á—ë—Ç—ã:**
```
1. Dashboard (–æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
   - –í—Å–µ–≥–æ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π (–∑–∞ –ø–µ—Ä–∏–æ–¥)
   - –í—Å–µ–≥–æ –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤ (–∞–∫—Ç–∏–≤–Ω—ã—Ö/–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö)
   - –í—Å–µ–≥–æ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤ (–æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Å–∫–∏–¥–æ–∫
   - –í—ã—Ä—É—á–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)

2. –ü–∞–≤–∏–ª—å–æ–Ω—ã
   - –¢–æ–ø-10 –ø–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞–º
   - –¢–æ–ø-10 –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∫–∏–¥–æ–∫
   - –ù–æ–≤—ã–µ –ø–∞–≤–∏–ª—å–æ–Ω—ã
   - –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞–≤–∏–ª—å–æ–Ω—ã (> 1 –º–µ—Å—è—Ü–∞ –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

3. –ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä—ã
   - –ê–∫—Ç–∏–≤–Ω—ã–µ vs –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ
   - –ù–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –†–µ–π—Ç–∏–Ω–≥ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤
   - –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π

4. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤
   - –í—ã–±–æ—Ä –¥–≤—É—Ö –¥–∞—Ç/–ø–µ—Ä–∏–æ–¥–æ–≤
   - –†–∞–∑–Ω–∏—Ü–∞ –≤ % –∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö —á–∏—Å–ª–∞—Ö

5. –ê–Ω–æ–º–∞–ª–∏–∏
   - –í–Ω–µ–∑–∞–ø–Ω—ã–π —Ä–æ—Å—Ç/–ø–∞–¥–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
   - –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–º–Ω–æ–≥–æ —Å–∫–∏–¥–æ–∫/—É–¥–∞–ª–µ–Ω–∏–π)
```

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:**
```html
<!-- superadmin.html —Ä–∞—Å—à–∏—Ä–∏—Ç—å -->
<div id="dashboard-tab">
  <div class="metric-cards">
    <div class="metric-card">
      <h3>–ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏</h3>
      <span class="number">12,345</span>
      <span class="change positive">+15%</span>
    </div>
    <!-- ... -->
  </div>
  
  <div class="charts-section">
    <div id="visitors-chart"></div>
    <div id="top-pavilions-chart"></div>
    <div id="top-discounts-chart"></div>
  </div>
  
  <div class="period-comparison">
    <select id="period1">
      <option>–ü–æ—Å–ª–µ–¥–Ω—è—è –Ω–µ–¥–µ–ª—è</option>
      <option>–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü</option>
      <!-- ... -->
    </select>
    <select id="period2">...</select>
    <button>–°—Ä–∞–≤–Ω–∏—Ç—å</button>
  </div>
</div>
```

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
```
- Chart.js –∏–ª–∏ Recharts –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- date-fns –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏
- numeral.js –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–µ–ª
```

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `/js/superadmin-analytics.js` - –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –†–∞—Å—à–∏—Ä–∏—Ç—å `/superadmin.html` —Å –Ω–æ–≤—ã–º–∏ –≤–∫–ª–∞–¥–∫–∞–º–∏
- `/js/charts.service.js` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤

**Acceptance Criteria:**
- ‚úÖ –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê–Ω–æ–º–∞–ª–∏–∏ –≤—ã—è–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ë–î
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å 10,000+ –∑–∞–ø–∏—Å—è–º–∏

---

### –ú–û–î–£–õ–¨ 3: –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨ –î–õ–Ø –ü–û–°–ï–¢–ò–¢–ï–õ–ï–ô

#### –ó–∞–¥–∞—á–∞ H5: –§—É–Ω–∫—Ü–∏—è "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ"

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° MEDIUM  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** MEDIUM  

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–∞–≤–∏–ª—å–æ–Ω—ã –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
```
- –°–µ—Ä–¥–µ—á–∫–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û—Ç–¥–µ–ª—å–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ "–ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∏–∑ –º–µ–Ω—é
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –≠–∫—Å–ø–æ—Ä—Ç —Å–ø–∏—Å–∫–∞ (Share)
```

**–°—Ö–µ–º–∞ –ë–î:**
```sql
CREATE TABLE favorites (
  id UUID PRIMARY KEY,
  user_phone TEXT, -- –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
  pavilion_id UUID REFERENCES pavilions(id),
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_phone, pavilion_id)
);
```

**–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (localStorage):**
```javascript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∞
{
  "favorites": ["pavilion-id-1", "pavilion-id-2"],
  "sync_pending": true
}
```

**UI/UX:**
```html
<!-- –ö–Ω–æ–ø–∫–∞ –≤ –ø–∞–≤–∏–ª—å–æ–Ω info -->
<button id="favorite-btn" class="favorite-btn" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">
  <span class="heart-icon">‚ô°</span>
</button>

<!-- –°–ª–µ–≤–∞ –º–µ–Ω—é —Å "–ò–∑–±—Ä–∞–Ω–Ω—ã–µ" -->
<div class="sidebar-menu">
  <button class="menu-item" id="favorites-link">
    <span>‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ (5)</span>
  </button>
</div>

<!-- –í–∫–ª–∞–¥–∫–∞ –ò–∑–±—Ä–∞–Ω–Ω—ã–µ -->
<div id="favorites-view">
  <h2>–ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –ø–∞–≤–∏–ª—å–æ–Ω—ã</h2>
  <div class="pavilions-grid">
    <!-- ... -->
  </div>
</div>
```

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `/js/map.js` - –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ `addToFavorites()`, `removeFromFavorites()`
- `/js/data.js` - API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å favorites
- `/index.html` - –¥–æ–±–∞–≤–∏—Ç—å UI —ç–ª–µ–º–µ–Ω—Ç—ã
- `/pavilion.html` - –∫–Ω–æ–ø–∫–∞ "–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"
- –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `/js/favorites.service.js`

**Acceptance Criteria:**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤—Ö–æ–¥–µ/–≤—ã—Ö–æ–¥–µ
- ‚úÖ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç offline
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–µ–π –≤ —Å–ø–∏—Å–∫–µ

---

#### –ó–∞–¥–∞—á–∞ M4: –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ —Å–æ—Ü.—Å–µ—Ç—è—Ö (—Ä–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏ –¥–ª—è —Ä–∞—Å—à–∞—Ä–∏–≤–∞–Ω–∏—è  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° MEDIUM  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** MEDIUM  

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–ª–∏—Ç—å—Å—è –ø–∞–≤–∏–ª—å–æ–Ω–∞–º–∏, —Å–∫–∏–¥–∫–∞–º–∏ –≤ —Å–æ—Ü.—Å–µ—Ç—è—Ö –¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã.

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–µ—Ç–∏:**
```
- –Ø–Ω–¥–µ–∫—Å (Ya Share)
- –í–ö–æ–Ω—Ç–∞–∫—Ç–µ (VK Share)
- Telegram (tg://share)
- WhatsApp (wa.me)
- Facebook
- Twitter/X
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```javascript
// –ü—Ä–∏–º–µ—Ä
const shareOnSocial = (pavilionId, platform) => {
  const pavilion = getPavilion(pavilionId);
  const url = `${window.location.origin}/pavilion.html?id=${pavilionId}`;
  const text = `Check out ${pavilion.shop_name} on Aprashka Map! üó∫Ô∏è`;
  
  switch(platform) {
    case 'telegram':
      window.open(`https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`);
      break;
    case 'vk':
      VK.UI.shareTo(pavilionId, {...});
      break;
    // ...
  }
};
```

**–ú–µ—Ç—Ä–∏–∫–∏:**
```sql
CREATE TABLE social_shares (
  id UUID PRIMARY KEY,
  pavilion_id UUID REFERENCES pavilions(id),
  platform TEXT, -- telegram, vk, facebook, etc
  created_at TIMESTAMP DEFAULT NOW()
);
```

**UI:**
```html
<div class="share-buttons">
  <button data-platform="telegram" class="share-btn share-telegram">
    <i class="icon-telegram"></i> Telegram
  </button>
  <button data-platform="vk" class="share-btn share-vk">
    <i class="icon-vk"></i> VK
  </button>
  <button data-platform="whatsapp" class="share-btn share-whatsapp">
    <i class="icon-whatsapp"></i> WhatsApp
  </button>
  <!-- ... -->
</div>
```

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `/pavilion.html` - –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏ Share
- `/js/share.service.js` - –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—à–∞—Ä–∏–≤–∞–Ω–∏—è (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- `/js/data.js` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞—Ä–æ–≤
- `/index.html` - –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞—Å—à–∞—Ä–∏–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª—ã

**Acceptance Criteria:**
- ‚úÖ –í—Å–µ –∫–Ω–æ–ø–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –¢–µ–∫—Å—Ç –∏ —Å—Å—ã–ª–∫–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤–µ—Ä–Ω–æ
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞—Ä–æ–≤ –≤ –ë–î
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π –≤–∏–¥ –∫–Ω–æ–ø–æ–∫
- ‚úÖ Mobile-friendly

---

### –ú–û–î–£–õ–¨ 4: –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° –ö–ê–†–¢–û–ì–†–ê–§–ò–ß–ï–°–ö–ò–ú–ò –°–ï–†–í–ò–°–ê–ú–ò

#### –ó–∞–¥–∞—á–∞ M2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞–º–∏ / 2GIS

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤ —ç—Ç–∞–∂–µ–π –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° MEDIUM / üî¥ HIGH  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** HIGH  

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä—É—á–Ω—É—é –æ—Ç—Ä–∏—Å–æ–≤–∫—É –ø–ª–∞–Ω–æ–≤ —ç—Ç–∞–∂–µ–π. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫–∞—Ä—Ç—ã.

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
```
1. API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ —ç—Ç–∞–∂–∞ –ø–æ –∞–¥—Ä–µ—Å—É (API –Ø–Ω–¥–µ–∫—Å–∞)
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–∞–≤–∏–ª—å–æ–Ω–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ

2. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
   - –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ –Ø–Ω–¥–µ–∫—Å–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–∞–≤–∏–ª—å–æ–Ω–∞
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ 2GIS
   - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –¥–æ –ø–∞–≤–∏–ª—å–æ–Ω–∞

3. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤ —Å–µ—Ä–≤–∏—Å–µ
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç
```

**API –Ø–Ω–¥–µ–∫—Å –ö–∞—Ä—Ç—ã:**
```javascript
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
const ymaps = window.ymaps;

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã
const map = new ymaps.Map("map-container", {
  center: [55.7558, 37.6173],
  zoom: 18,
  controls: ['zoomControl']
});

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤
pavilions.forEach(p => {
  if (p.location_x && p.location_y) {
    const placemark = new ymaps.Placemark([p.location_x, p.location_y], {
      balloonContent: p.shop_name,
      hintContent: p.category
    });
    map.geoObjects.add(placemark);
  }
});
```

**API 2GIS:**
```javascript
// –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è 2GIS
// https://api.2gis.com/docs/
```

**–°—Ö–µ–º–∞ –ë–î:**
```sql
ALTER TABLE pavilions ADD COLUMN map_data JSONB;
-- –•—Ä–∞–Ω–∏—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã

CREATE TABLE map_cache (
  id UUID PRIMARY KEY,
  building_code TEXT,
  floor INT,
  map_url TEXT,
  cached_at TIMESTAMP,
  expires_at TIMESTAMP
);
```

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `/js/maps.service.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–∞–º–∏
- `/js/yandex-maps-wrapper.js` - –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è –Ø–Ω–¥–µ–∫—Å API
- `/js/2gis-wrapper.js` - –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è 2GIS API
- `/@pavilion-map.html` - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∫–∞—Ä—Ç–æ–π

**Acceptance Criteria:**
- ‚úÖ –ö–∞—Ä—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ (—Å –∫—ç—à–µ–º)
- ‚úÖ –ú–µ—Ç–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–µ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç offline (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–æ)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞

---

### –ú–û–î–£–õ–¨ 5: –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –ê–£–î–ò–¢

#### –ó–∞–¥–∞—á–∞ H6: –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (Audit Log)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∞—É–¥–∏—Ç–∞  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ HIGH  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** MEDIUM  

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –≤–µ—Å—Ç–∏ –∂—É—Ä–Ω–∞–ª –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–∑–æ–ª—é—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.

**–°–æ–±—ã—Ç–∏—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
```
- –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—É—Å–ø–µ—à–Ω—ã–π/–Ω–µ—É–¥–∞—á–Ω—ã–π)
- –í—ã—Ö–æ–¥
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–≤–∏–ª—å–æ–Ω–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–∞–≤–∏–ª—å–æ–Ω–∞
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞–≤–∏–ª—å–æ–Ω–∞
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫–∏–¥–∫–∏
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫–∏–¥–∫–∏
- –£–¥–∞–ª–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏
- –û–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
```

**–°—Ö–µ–º–∞ –ë–î:**
```sql
CREATE TABLE audit_log (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES tenants(id), -- –º–æ–∂–µ—Ç –±—ã—Ç—å NULL –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö
  action TEXT NOT NULL, -- login, pavilion_create, pavilion_update, etc
  resource_type TEXT, -- pavilion, tenant, discount, etc
  resource_id UUID, -- ID –ø–∞–≤–∏–ª—å–æ–Ω–∞/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/—Å–∫–∏–¥–∫–∏
  changes JSONB, -- {before: {...}, after: {...}}
  ip_address TEXT,
  user_agent TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  status TEXT -- success, failure
);

CREATE INDEX idx_audit_log_user ON audit_log(user_id);
CREATE INDEX idx_audit_log_created ON audit_log(created_at);
CREATE INDEX idx_audit_log_action ON audit_log(action);
```

**–§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –ª–æ–≥:**
```javascript
const logAudit = async (userId, action, resourceType, resourceId, changes, ip, ua) => {
  const { data, error } = await supabase
    .from('audit_log')
    .insert({
      user_id: userId,
      action,
      resource_type: resourceType,
      resource_id: resourceId,
      changes,
      ip_address: ip,
      user_agent: ua,
      status: 'success'
    });
  
  if (error) console.error('Audit log error', error);
};
```

**UI –¥–ª—è —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞:**
```html
<!-- superadmin.html –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ -->
<div id="audit-tab">
  <h2>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
  <div class="filters">
    <input type="text" placeholder="–ü–æ–∏—Å–∫ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é">
    <select id="action-filter">
      <option value="">–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è</option>
      <option value="login">–í—Ö–æ–¥</option>
      <option value="pavilion_create">–°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–≤–∏–ª—å–æ–Ω–∞</option>
      <!-- ... -->
    </select>
    <input type="date" id="date-from">
    <input type="date" id="date-to">
    <button>–§–∏–ª—å—Ç—Ä</button>
  </div>
  
  <table class="audit-table">
    <thead>
      <tr>
        <th>–í—Ä–µ–º—è</th>
        <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
        <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
        <th>–†–µ—Å—É—Ä—Å</th>
        <th>IP</th>
        <th>–°—Ç–∞—Ç—É—Å</th>
        <th>–î–µ—Ç–∞–ª–∏</th>
      </tr>
    </thead>
    <tbody id="audit-log">
      <!-- –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JS -->
    </tbody>
  </table>
</div>
```

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `/js/audit.service.js` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- –í—Å–µ —Ñ–∞–π–ª—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –º–æ–¥—É–ª–µ–π - –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã logAudit()
- `/superadmin.html` - –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤

**Acceptance Criteria:**
- ‚úÖ –í—Å–µ –≤–∞–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –õ–æ–≥–∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã (write-only)
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –Ω–µ —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ GDPR compliance (—Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ N –¥–Ω–µ–π)

---

### –ú–û–î–£–õ–¨ 6: –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø

#### –ó–∞–¥–∞—á–∞ M5: Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–∫–∞ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° MEDIUM  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** MEDIUM  

**–°–æ–±—ã—Ç–∏—è –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
```
–î–ª—è –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤:
- –ù–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫–∏–¥–∫–∏
- –ù–æ–≤—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞–≤–∏–ª—å–æ–Ω–∞
- –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (–Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª)
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç

–î–ª—è —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞:
- –ù–æ–≤—ã–π –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä –æ–∂–∏–¥–∞–µ—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è
- –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª (—Å–ø–∞–º —Å–∫–∏–¥–∫–∏)
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø–∞–¥–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```
- SendGrid –∏–ª–∏ Mailgun –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
- –®–∞–±–ª–æ–Ω—ã –ø–∏—Å—å–º–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- –Æ–Ω—Å—É–±—Å–∫—Ä–∞–π–± —Å—Å—ã–ª–∫–∞ –≤ –ø–∏—Å—å–º–∞—Ö
```

**–°—Ö–µ–º–∞ –ë–î:**
```sql
ALTER TABLE tenants ADD COLUMN email TEXT;
ALTER TABLE tenants ADD COLUMN email_verified BOOLEAN DEFAULT FALSE;
ALTER TABLE tenants ADD COLUMN email_notifications BOOLEAN DEFAULT TRUE;

CREATE TABLE email_queue (
  id UUID PRIMARY KEY,
  tenant_id UUID REFERENCES tenants(id),
  type TEXT, -- discount_used, new_view, message, etc
  subject TEXT,
  body TEXT,
  status TEXT, -- pending, sent, failed
  created_at TIMESTAMP,
  sent_at TIMESTAMP,
  error TEXT
);
```

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `/js/email.service.js` - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º
- `/email-templates/` - HTML —à–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º

#### –ó–∞–¥–∞—á–∞ M6: Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Web Push API  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° MEDIUM  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** MEDIUM  

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ PWA.

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:**
```
- Web Push API + Service Worker
- Firebase Cloud Messaging (FCM)
- Subscription management –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `/sw.js` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ push —Å–æ–±—ã—Ç–∏–π
- `/js/push-notifications.service.js` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- Backend –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ push (—Ñ—É–Ω–∫—Ü–∏—è Supabase)

---

### –ú–û–î–£–õ–¨ 7: –≠–ö–°–ü–û–†–¢ –ò –û–¢–ß–Å–¢–´

#### –ó–∞–¥–∞—á–∞ M7: –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ (PDF, Excel)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ PDF –∏ Excel  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° MEDIUM  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** MEDIUM  

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã:**
```
- PDF (—á–µ—Ä–µ–∑ jsPDF + html2canvas)
- Excel (—á–µ—Ä–µ–∑ ExcelJS –∏–ª–∏ xlsx)
- CSV (—á–µ—Ä–µ–∑ papa-parse)
```

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤:**
```
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞–≤–∏–ª—å–æ–Ω–∞ (–∞—Ä–µ–Ω–¥–∞)
- –û–±—â–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (—Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω)
- –¢–æ–ø –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤
- –°–ø–∏—Å–æ–∫ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤
```

**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:**
```javascript
import jsPDF from 'jspdf';
import * as XLSX from 'xlsx';

const exportToPDF = async (data, filename) => {
  const pdf = new jsPDF();
  // ... —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  pdf.save(filename);
};

const exportToExcel = (data, filename) => {
  const ws = XLSX.utils.json_to_sheet(data);
  const wb = XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb, ws, "Sheet1");
  XLSX.writeFile(wb, filename);
};
```

**–§–∞–π–ª—ã:**
- `/js/export.service.js` - —É—Å–ª—É–≥–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)

---

### –ú–û–î–£–õ–¨ 8: –°–û–¶–ò–ê–õ–¨–ù–ê–Ø –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø

#### –ó–∞–¥–∞—á–∞ M1: –°–æ—Ü–∏–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –í—Ö–æ–¥ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å, –í–ö, Telegram  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° MEDIUM  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** HIGH  

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:**
```
- –Ø–Ω–¥ex.ID
- VK ID
- Telegram Bot API (–≤—Ö–æ–¥ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É Telegram)
- Google (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

**–ü–æ—Ç–æ–∫:**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å"
2. –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ OAuth —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
3. –ü—Ä–æ–≤–∞–π–¥–µ—Ä —Ä–µ–¥–∏—Ä–µ–∫—Ç –æ–±—Ä–∞—Ç–Ω–æ —Å –∫–æ–¥–æ–º –¥–æ—Å—Ç—É–ø–∞
4. –°–µ—Ä–≤–µ—Ä –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç –∫–æ–¥ –Ω–∞ user info
5. –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
6. –í—ã–ø—É—Å–∫ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
```javascript
// –ü—Ä–∏–º–µ—Ä –Ø–Ω–¥–µ–∫—Å–∞
const authYandex = async (code) => {
  const response = await fetch('/api/auth/yandex', {
    method: 'POST',
    body: JSON.stringify({ code })
  });
  const { token, user } = await response.json();
  saveSession(token, user);
};
```

**–°—Ö–µ–º–∞ –ë–î:**
```sql
CREATE TABLE oauth_accounts (
  id UUID PRIMARY KEY,
  tenant_id UUID REFERENCES tenants(id),
  provider TEXT, -- yandex, vk, telegram, google
  provider_id TEXT,
  email TEXT,
  name TEXT,
  avatar_url TEXT,
  data JSONB,
  created_at TIMESTAMP,
  UNIQUE(provider, provider_id)
);
```

**–§–∞–π–ª—ã:**
- `/js/oauth.service.js` - –ª–æ–≥–∏–∫–∞ OAuth
- –û–±–Ω–æ–≤–∏—Ç—å `/auth.js` –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- Backend —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±–º–µ–Ω–∞ –∫–æ–¥–æ–≤

---

## üèÜ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∞

### –ö–æ–¥
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω –Ω–∞ —á–∏—Å—Ç–æ–º JavaScript –±–µ–∑ –Ω–µ–Ω—É–∂–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ edge cases
- ‚úÖ –ù–µ—Ç console.log –≤ production –∫–æ–¥–µ
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ style guide

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –í—Å–µ acceptance criteria –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ offline —Ä–µ–∂–∏–º–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–∞

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ù–µ—Ç SQL-injection —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫
- ‚úÖ CSRF —Ç–æ–∫–µ–Ω—ã –≥–¥–µ –Ω—É–∂–Ω–æ
- ‚úÖ –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –≤ localStorage
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –∫–ª–∏–µ–Ω—Ç–µ

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ README –æ–±–Ω–æ–≤–ª—ë–Ω
- ‚úÖ API –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å)
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–ª—è –ª—é–¥–µ–π —Å –∏–Ω–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

---

## üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–µ–∫—É—â–∏–π —Å—Ç—ç–∫
```
Frontend:  Pure JavaScript (ES6+), HTML5, CSS3, SVG
Backend:   Supabase (PostgreSQL, Auth, RLS)
Hosting:   GitHub Pages / Vercel
PWA:       Service Worker, Web App Manifest
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

#### –î–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏/–≥—Ä–∞—Ñ–∏–∫–æ–≤
```json
{
  "Chart.js": "^3.9.1",
  "date-fns": "^2.29.3",
  "numeral": "^2.0.6"
}
```

#### –î–ª—è 2FA
```json
{
  "speakeasy": "^2.0.0",
  "qrcode": "^1.5.3"
}
```

#### –î–ª—è SMS
```json
{
  "twilio": "^3.75.0"  // –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
}
```

#### –î–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞
```json
{
  "jspdf": "^2.5.1",
  "html2canvas": "^1.4.1",
  "exceljs": "^4.3.0",
  "papaparse": "^5.4.1"
}
```

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
```
- Service Layer (data.js, auth.js, analytics.service.js, etc)
- State Management (MapState, AdminState, etc –æ–±—ä–µ–∫—Ç—ã)
- Event-driven (addEventListener, custom events)
- Async/Await –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- Dependency Injection –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
```

### –ü–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)
```
/apra-shka-map/
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js                    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ map.js                     # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ admin.js                   # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ superadmin.js              # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ data.js                    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ sms.service.js             # –ù–û–í–´–ô - –æ—Ç–ø—Ä–∞–≤–∫–∞ SMS
‚îÇ   ‚îú‚îÄ‚îÄ totp.service.js            # –ù–û–í–´–ô - 2FA –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ analytics.service.js       # –ù–û–í–´–ô - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ favorites.service.js       # –ù–û–í–´–ô - –∏–∑–±—Ä–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ share.service.js           # –ù–û–í–´–ô - –ø–æ–¥–µ–ª–∏—Ç—å—Å—è
‚îÇ   ‚îú‚îÄ‚îÄ maps.service.js            # –ù–û–í–´–ô - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç
‚îÇ   ‚îú‚îÄ‚îÄ audit.service.js           # –ù–û–í–´–ô - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ email.service.js           # –ù–û–í–´–ô - emails
‚îÇ   ‚îú‚îÄ‚îÄ push-notifications.svc.js  # –ù–û–í–´–ô - push notifications
‚îÇ   ‚îú‚îÄ‚îÄ export.service.js          # –ù–û–í–´–ô - —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ oauth.service.js           # –ù–û–í–´–ô - —Å–æ—Ü.–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ charts.service.js          # –ù–û–í–´–ô - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ config.public.js           # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π - —Ä–∞—Å—à–∏—Ä–∏—Ç—å
‚îÇ   ‚îî‚îÄ‚îÄ pwa.js                     # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
‚îÇ
‚îú‚îÄ‚îÄ email-templates/               # –ù–û–í–ê–Ø –ø–∞–ø–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ discount-used.html
‚îÇ   ‚îú‚îÄ‚îÄ weekly-report.html
‚îÇ   ‚îú‚îÄ‚îÄ approval-notification.html
‚îÇ   ‚îî‚îÄ‚îÄ warning-notification.html
‚îÇ
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îú‚îÄ‚îÄ style.css                  # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ admin.css                  # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
‚îÇ   ‚îî‚îÄ‚îÄ analytics.css              # –ù–û–í–´–ô - —Å—Ç–∏–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
‚îÇ
‚îî‚îÄ‚îÄ images/
    ‚îî‚îÄ‚îÄ floor-plans/               # –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ø–∞–ø–∫–∞
        ‚îî‚îÄ‚îÄ building_33_floor_1.png
```

---

## üìÖ –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –§–∞–∑–∞ 1: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–µ–¥–µ–ª–∏ 1-2)
```
–ù–µ–¥–µ–ª—è 1:
- H1: SMS –æ—Ç–ø—Ä–∞–≤–∫–∞ (2-3 –¥–Ω—è)
- H2.1: TOTP –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (2-3 –¥–Ω—è)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ë–î (1 –¥–µ–Ω—å)

–ù–µ–¥–µ–ª—è 2:
- H2.2: UI –¥–ª—è 2FA (2-3 –¥–Ω—è)
- H2.3: –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–¥—ã (1-2 –¥–Ω—è)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –¥–µ–Ω—å)
```

### –§–∞–∑–∞ 2: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–Ω–µ–¥–µ–ª–∏ 3-4)
```
–ù–µ–¥–µ–ª—è 3:
- H3: –ë–∞–∑–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (3-4 –¥–Ω—è)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (1-2 –¥–Ω—è)

–ù–µ–¥–µ–ª—è 4:
- H4: –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (3-4 –¥–Ω—è)
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (2-3 –¥–Ω—è)
```

### –§–∞–∑–∞ 3: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (–Ω–µ–¥–µ–ª–∏ 5-6)
```
–ù–µ–¥–µ–ª—è 5:
- H5: –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (2-3 –¥–Ω—è)
- H6: Audit Log (2-3 –¥–Ω—è)

–ù–µ–¥–µ–ª—è 6:
- M4: Share –≤ —Å–æ—Ü.—Å–µ—Ç—è—Ö (2-3 –¥–Ω—è)
- M3: QR-–∫–æ–¥—ã (1-2 –¥–Ω—è)
- M5: Email notifications (2-3 –¥–Ω—è)
```

### –§–∞–∑–∞ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–Ω–µ–¥–µ–ª–∏ 7-8)
```
–ù–µ–¥–µ–ª—è 7:
- M2: –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã / 2GIS (3-4 –¥–Ω—è)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç (1-2 –¥–Ω—è)

–ù–µ–¥–µ–ª—è 8:
- M1: OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (3-4 –¥–Ω—è)
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 –¥–Ω—è)
```

### –§–∞–∑–∞ 5: –ö–∞—á–µ—Å—Ç–≤–æ (–Ω–µ–¥–µ–ª–∏ 9-10)
```
–ù–µ–¥–µ–ª—è 9:
- L7: Unit —Ç–µ—Å—Ç—ã (3-4 –¥–Ω—è)
- L7: Integration —Ç–µ—Å—Ç—ã (2-3 –¥–Ω—è)

–ù–µ–¥–µ–ª—è 10:
- L8: CI/CD pipeline (2-3 –¥–Ω—è)
- L9: Docker (1-2 –¥–Ω—è)
- –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 –¥–Ω—è)
```

**–ò—Ç–æ–≥–æ: 10 –Ω–µ–¥–µ–ª—å (~2.5 –º–µ—Å—è—Ü–∞)**

---

## üìä –†–∞–∑–º–µ—Ä —Ä–∞–±–æ—Ç

```
–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:  34-45 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:  28-35 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:   15-20 –¥–Ω–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–í—Å–µ–≥–æ:              ~70-100 –¥–Ω–µ–π (~3-5 –º–µ—Å—è—Ü–µ–≤ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏)
```

---

## üöÄ –ó–∞–ø—É—Å–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### Checklist –¥–ª—è —Å—Ç–∞—Ä—Ç–∞–ø–∞
- [ ] –í—ã–±—Ä–∞—Ç—å SMS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á–∏ API
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
- [ ] –°–æ–∑–¥–∞—Ç—å git branch –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã
- [ ] –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD pipeline –≤ GitHub Actions
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ API –¥–ª—è –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### –í–µ—Ç–≤–ª–µ–Ω–∏–µ –≤ git
```
main (production)
‚îú‚îÄ‚îÄ develop (staging)
‚îú‚îÄ‚îÄ feature/sms-verification
‚îú‚îÄ‚îÄ feature/2fa-auth
‚îú‚îÄ‚îÄ feature/analytics
‚îú‚îÄ‚îÄ feature/favorites
‚îú‚îÄ‚îÄ feature/audit-log
‚îú‚îÄ‚îÄ feature/email-notifications
‚îú‚îÄ‚îÄ feature/maps-integration
‚îú‚îÄ‚îÄ feature/oauth-auth
‚îú‚îÄ‚îÄ feature/testing
‚îî‚îÄ‚îÄ feature/ci-cd
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –≤–æ–ø—Ä–æ—Å—ã

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ README.md
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –ø–æ—Ö–æ–∂–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –≤ –∫–æ–¥–µ
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
4. –°–æ–∑–¥–∞–π—Ç–µ issue –≤ GitHub

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 2.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –§–µ–≤—Ä–∞–ª—å 2026  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

