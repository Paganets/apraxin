<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∞–º–∏ ‚Äî –ö–∞—Ä—Ç–∞ –ê–ø—Ä–∞—à–∫–∏">
    <meta name="theme-color" content="#000000">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∞–º–∏ ‚Äî –ö–∞—Ä—Ç–∞ –ê–ø—Ä–∞—à–∫–∏</title>
    
    <!-- Supabase Configuration -->
    <meta name="supabase-anon-key" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFhZ3B1dWNkbmtyendzbW5ieW1rIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA1MDMxMjYsImV4cCI6MjA4NjA3OTEyNn0.T3vEY9VfxIQ19AtWPkwk6xiqAZe6sEzG-Ke73olUPsY">
    <meta name="supabase-url" content="https://qagpuucdnkrzwsmnbymk.supabase.co">
    
    <script>
        window.SupabaseConfig = {
            url: document.querySelector('meta[name="supabase-url"]').content.trim(),
            anonKey: document.querySelector('meta[name="supabase-anon-key"]').content.trim()
        };
    </script>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- –°—Ç–∏–ª–∏ -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <!-- –®–ê–ü–ö–ê -->
    <header class="admin-header">
        <div class="admin-header-title">
            <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∞–º–∏</h1>
        </div>
        <div class="admin-header-user" id="user-info">
            <span id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
            <button class="btn btn-secondary back-btn" onclick="window.location.href='./admin.html'" style="margin-right: 8px;">–ù–∞–∑–∞–¥</button>
            <button class="btn btn-primary" onclick="handleLogout()">–í—ã—Ö–æ–¥</button>
        </div>
    </header>

    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
    <main class="app-main">
        <!-- –ó–ê–ì–û–õ–û–í–û–ö –ò –ö–ù–û–ü–ö–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-xl);">
            <h2 class="admin-section-title">–ú–æ–∏ —Å–∫–∏–¥–∫–∏</h2>
            <div style="display: flex; gap: var(--spacing-sm);">
                <button class="btn btn-secondary" onclick="window.location.href='./admin.html'">–ù–∞–∑–∞–¥</button>
                <button class="btn btn-primary" onclick="showAddDiscountModal()">+ –î–æ–±–∞–≤–∏—Ç—å —Å–∫–∏–¥–∫—É</button>
            </div>
        </div>

        <!-- –°–ü–ò–°–û–ö –°–ö–ò–î–û–ö -->
        <div id="discounts-container">
            <div id="discounts-list" style="display: grid; gap: var(--spacing-lg);">
                <p style="color: var(--color-text-light); text-align: center; padding: var(--spacing-xl);">
                    –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫–∏–¥–æ–∫...
                </p>
            </div>
        </div>
    </main>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û: –î–û–ë–ê–í–ò–¢–¨/–†–ï–î–ê–ö–¢–ò–†–û–í–ê–¢–¨ –°–ö–ò–î–ö–£ -->
    <div id="discount-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="discount-modal-title">–î–æ–±–∞–≤–∏—Ç—å —Å–∫–∏–¥–∫—É</h3>
                <button class="modal-close" onclick="hideAddDiscountModal()">‚úï</button>
            </div>
            <form id="discount-form">
                <input type="hidden" id="discount-id">
                <input type="hidden" id="discount-pavilion-id">
                
                <div class="form-group">
                    <label for="discount-pavilion-select">–ü–∞–≤–∏–ª—å–æ–Ω *</label>
                    <select id="discount-pavilion-select" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–≤–∏–ª—å–æ–Ω</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="discount-title">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–∏–¥–∫–∏ *</label>
                    <input type="text" id="discount-title" placeholder="24-—á–∞—Å–æ–≤–∞—è —Ä–∞—Å–ø—Ä–æ–¥–∞–∂–∞" required>
                </div>
                
                <div class="form-group">
                    <label for="discount-desc">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                    <textarea id="discount-desc" placeholder="20% –Ω–∞ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã" rows="3" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="discount-date">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                    <input type="date" id="discount-date">
                </div>
                
                <div class="form-group">
                    <label for="discount-product">–ù–∞ –∫–∞–∫–æ–π —Ç–æ–≤–∞—Ä</label>
                    <input type="text" id="discount-product" placeholder="–í—Å–µ —Ç–æ–≤–∞—Ä—ã / –í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞ / –∏ —Ç.–¥.">
                </div>
                
                <div style="display: flex; gap: var(--spacing-md); margin-top: var(--spacing-xl);">
                    <button type="submit" class="btn btn-primary" style="flex: 1;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary" style="flex: 1;" onclick="hideAddDiscountModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –°–ö–†–ò–ü–¢–´ -->
    <script src="js/pwa.js"></script>
    <script src="js/data.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/admin.js"></script>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentUser = null;
        let currentPavilions = [];
        let currentDiscounts = [];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üéØ Discounts page: DOMContentLoaded');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            if (window.Auth && typeof window.Auth.requireAuth === 'function') {
                const isAuth = await window.Auth.requireAuth();
                if (!isAuth) {
                    console.log('‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...');
                    return;
                }
            }

            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if (window.Auth && typeof window.Auth.getCurrentTenant === 'function') {
                currentUser = window.Auth.getCurrentTenant();
                console.log('üë§ –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', currentUser);
                updateUserInfo();
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–∞–≤–∏–ª—å–æ–Ω—ã
            await loadPavilions();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∫–∏–¥–∫–∏
            await loadDiscounts();
        });

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        function updateUserInfo() {
            const userNameEl = document.getElementById('user-name');
            if (userNameEl && currentUser) {
                userNameEl.textContent = currentUser.name || currentUser.phone || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function loadPavilions() {
            try {
                if (!currentUser || !currentUser.phone) {
                    console.error('‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                    return;
                }

                const url = `${window.SupabaseConfig.url}/rest/v1/pavilions?owner_phone=eq.${encodeURIComponent(currentUser.phone)}&select=*`;
                const response = await fetch(url, {
                    headers: {
                        'apikey': window.SupabaseConfig.anonKey,
                        'Content-Type': 'application/json'
                    }
                });

                if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤');

                currentPavilions = await response.json();
                console.log('üì¶ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤:', currentPavilions.length);

                // –ó–∞–ø–æ–ª–Ω—è–µ–º select —Å –ø–∞–≤–∏–ª—å–æ–Ω–∞–º–∏
                const select = document.getElementById('discount-pavilion-select');
                if (select) {
                    select.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–≤–∏–ª—å–æ–Ω</option>';
                    currentPavilions.forEach(p => {
                        select.innerHTML += `<option value="${p.id}">${p.name} (${p.location})</option>`;
                    });
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö —Å–∫–∏–¥–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        async function loadDiscounts() {
            const container = document.getElementById('discounts-list');
            if (!container) return;

            try {
                if (!currentPavilions || currentPavilions.length === 0) {
                    container.innerHTML = '<p style="color: var(--color-text-light); text-align: center; padding: var(--spacing-xl);">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–≤–∏–ª—å–æ–Ω, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–ª—è—Ç—å —Å–∫–∏–¥–∫–∏.</p>';
                    return;
                }

                // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —Å–∫–∏–¥–∫–∏ –∏–∑ –≤—Å–µ—Ö –ø–∞–≤–∏–ª—å–æ–Ω–æ–≤
                currentDiscounts = [];
                currentPavilions.forEach(pavilion => {
                    if (Array.isArray(pavilion.discounts)) {
                        pavilion.discounts.forEach(discount => {
                            currentDiscounts.push({
                                ...discount,
                                pavilion_id: pavilion.id,
                                pavilion_name: pavilion.name,
                                pavilion_location: pavilion.location
                            });
                        });
                    }
                });

                console.log('üí∞ –í—Å–µ–≥–æ —Å–∫–∏–¥–æ–∫:', currentDiscounts.length);

                if (currentDiscounts.length === 0) {
                    container.innerHTML = '<p style="color: var(--color-text-light); text-align: center; padding: var(--spacing-xl);">–ü–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–∫–∏–¥–æ–∫. –ù–∞–∂–º–∏—Ç–µ "+ –î–æ–±–∞–≤–∏—Ç—å —Å–∫–∏–¥–∫—É" —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é.</p>';
                    return;
                }

                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–∫–∏–¥–∫–∏
                container.innerHTML = currentDiscounts.map(discount => `
                    <div class="discount-card" style="background: var(--color-secondary); border: 1px solid var(--color-border); border-radius: var(--radius-lg); padding: var(--spacing-lg); box-shadow: var(--shadow);">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: var(--spacing-md);">
                            <div>
                                <h3 style="margin: 0 0 var(--spacing-xs) 0; color: var(--color-primary);">${discount.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</h3>
                                <p style="margin: 0; font-size: var(--font-size-sm); color: var(--color-text-light);">
                                    ${discount.pavilion_name} ¬∑ ${discount.pavilion_location}
                                </p>
                            </div>
                            <div style="display: flex; gap: var(--spacing-sm);">
                                <button class="btn btn-secondary" onclick="editDiscount('${discount.pavilion_id}', ${discount.id || 0})" style="padding: var(--spacing-sm) var(--spacing-md); font-size: var(--font-size-sm);">–ò–∑–º–µ–Ω–∏—Ç—å</button>
                                <button class="btn btn-danger" onclick="deleteDiscount('${discount.pavilion_id}', ${discount.id || 0})" style="padding: var(--spacing-sm) var(--spacing-md); font-size: var(--font-size-sm);">–£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                        </div>
                        <p style="margin: 0 0 var(--spacing-sm) 0; color: var(--color-text);">${discount.description || ''}</p>
                        ${discount.validUntil ? `<p style="margin: 0; font-size: var(--font-size-sm); color: var(--color-text-light);">‚è± –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: ${new Date(discount.validUntil).toLocaleDateString('ru-RU')}</p>` : ''}
                        ${discount.applicableProducts ? `<p style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-light);">üè∑Ô∏è –¢–æ–≤–∞—Ä—ã: ${discount.applicableProducts}</p>` : ''}
                    </div>
                `).join('');

            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫–∏–¥–æ–∫:', error);
                container.innerHTML = '<p style="color: var(--color-danger); text-align: center; padding: var(--spacing-xl);">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫–∏–¥–æ–∫. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.</p>';
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
        function showAddDiscountModal() {
            const modal = document.getElementById('discount-modal');
            const form = document.getElementById('discount-form');
            const title = document.getElementById('discount-modal-title');
            
            if (form) form.reset();
            if (title) title.textContent = '–î–æ–±–∞–≤–∏—Ç—å —Å–∫–∏–¥–∫—É';
            if (modal) modal.style.display = 'flex';
        }

        // –°–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function hideAddDiscountModal() {
            const modal = document.getElementById('discount-modal');
            const form = document.getElementById('discount-form');
            
            if (form) form.reset();
            if (modal) modal.style.display = 'none';
        }

        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫–∏–¥–∫—É
        async function editDiscount(pavilionId, discountIndex) {
            console.log('‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫–∏–¥–∫–∏:', pavilionId, discountIndex);
            
            const pavilion = currentPavilions.find(p => p.id === pavilionId);
            if (!pavilion || !pavilion.discounts || !pavilion.discounts[discountIndex]) {
                alert('–°–∫–∏–¥–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
                return;
            }

            const discount = pavilion.discounts[discountIndex];
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É
            document.getElementById('discount-id').value = discountIndex;
            document.getElementById('discount-pavilion-id').value = pavilionId;
            document.getElementById('discount-pavilion-select').value = pavilionId;
            document.getElementById('discount-pavilion-select').disabled = true;
            document.getElementById('discount-title').value = discount.title || '';
            document.getElementById('discount-desc').value = discount.description || '';
            document.getElementById('discount-date').value = discount.validUntil || '';
            document.getElementById('discount-product').value = discount.applicableProducts || '';
            
            document.getElementById('discount-modal-title').textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫–∏–¥–∫—É';
            document.getElementById('discount-modal').style.display = 'flex';
        }

        // –£–¥–∞–ª–∏—Ç—å —Å–∫–∏–¥–∫—É
        async function deleteDiscount(pavilionId, discountIndex) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å–∫–∏–¥–∫—É?')) return;

            try {
                const pavilion = currentPavilions.find(p => p.id === pavilionId);
                if (!pavilion) throw new Error('–ü–∞–≤–∏–ª—å–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω');

                const updatedDiscounts = [...(pavilion.discounts || [])];
                updatedDiscounts.splice(discountIndex, 1);

                const url = `${window.SupabaseConfig.url}/rest/v1/pavilions?id=eq.${pavilionId}`;
                const response = await fetch(url, {
                    method: 'PATCH',
                    headers: {
                        'apikey': window.SupabaseConfig.anonKey,
                        'Content-Type': 'application/json',
                        'Prefer': 'return=representation'
                    },
                    body: JSON.stringify({ discounts: updatedDiscounts })
                });

                if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–∫–∏–¥–∫–∏');

                alert('–°–∫–∏–¥–∫–∞ —É–¥–∞–ª–µ–Ω–∞');
                await loadPavilions();
                await loadDiscounts();

            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–∫–∏–¥–∫–∏: ' + error.message);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–æ—Ä–º—ã
        document.getElementById('discount-form').addEventListener('submit', async function(e) {
            e.preventDefault();

            try {
                const pavilionId = document.getElementById('discount-pavilion-select').value;
                const discountId = document.getElementById('discount-id').value;
                
                if (!pavilionId) {
                    alert('–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–≤–∏–ª—å–æ–Ω');
                    return;
                }

                const pavilion = currentPavilions.find(p => p.id === pavilionId);
                if (!pavilion) throw new Error('–ü–∞–≤–∏–ª—å–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω');

                const discountData = {
                    title: document.getElementById('discount-title').value,
                    description: document.getElementById('discount-desc').value,
                    validUntil: document.getElementById('discount-date').value || null,
                    applicableProducts: document.getElementById('discount-product').value || null
                };

                let updatedDiscounts = [...(pavilion.discounts || [])];
                
                if (discountId !== '') {
                    // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                    updatedDiscounts[parseInt(discountId)] = discountData;
                } else {
                    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ
                    updatedDiscounts.push(discountData);
                }

                const url = `${window.SupabaseConfig.url}/rest/v1/pavilions?id=eq.${pavilionId}`;
                const response = await fetch(url, {
                    method: 'PATCH',
                    headers: {
                        'apikey': window.SupabaseConfig.anonKey,
                        'Content-Type': 'application/json',
                        'Prefer': 'return=representation'
                    },
                    body: JSON.stringify({ discounts: updatedDiscounts })
                });

                if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–∫–∏–¥–∫–∏');

                alert('–°–∫–∏–¥–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
                hideAddDiscountModal();
                await loadPavilions();
                await loadDiscounts();

            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏: ' + error.message);
            }
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω
        window.addEventListener('click', (e) => {
            const modal = document.getElementById('discount-modal');
            if (e.target === modal) {
                hideAddDiscountModal();
            }
        });

        // Logout
        function handleLogout() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
                if (window.Auth && typeof window.Auth.logout === 'function') {
                    window.Auth.logout();
                }
            }
        }
    </script>
</body>
</html>
